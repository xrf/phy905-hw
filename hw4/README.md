# Instructions

The program might crash if there is insufficient stack space.  To avoid this, run:

    ulimit -s 1000000 # allow ~1GB of stack space

To build the program only:

    make build

To build and generate all the reports:

    make

To build and run with a specific compiler such as `clang`, specify:

    make CC=clang

To test a BLAS implementation, specify:

    make CFLAGS="-Wall -O3 -DUSE_BLAS" LIBS="-l<blas> -lm"

where `<blas>` is a placeholder for the name of the BLAS library (e.g. for
OpenBLAS it would be `-lopenblas`).  Note that for OpenBLAS you should `export
OPENBLAS_NUM_THREADS=1` if you want to test single-threaded performance.

To test a different implementation, you will need to compile a BLAS-like
wrapper and then link with that.  For example, this is how you can test Eigen:

    (cd wrapper && make)
    make CFLAGS="-Wall -O3 -DUSE_BLAS" CPPFLAGS=-Iwrapper \
         LIBS="wrapper/eigen.o -lstdc++ -lm"

Note that since we are wrapping a C++ library, `-lstdc++` is required.

To clear all the data gathered and other autogenerated files, use:

    make clean
