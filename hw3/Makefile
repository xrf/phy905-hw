.POSIX:

CC=cc
CFLAGS=-O2

all: index.html

clean:
	rm -fr -- ../dist/bin/hw3_cotranspose ../dist/bin/hw3_transpose_01_0000020 ../dist/bin/hw3_transpose_01_0000100 ../dist/bin/hw3_transpose_01_0000500 ../dist/bin/hw3_transpose_01_0000800 ../dist/bin/hw3_transpose_01_0001000 ../dist/bin/hw3_transpose_01_0001500 ../dist/bin/hw3_transpose_01_0002000 ../dist/bin/hw3_transpose_01_0004000 ../dist/bin/hw3_transpose_16_0000020 ../dist/bin/hw3_transpose_16_0000100 ../dist/bin/hw3_transpose_16_0000500 ../dist/bin/hw3_transpose_16_0000800 ../dist/bin/hw3_transpose_16_0001000 ../dist/bin/hw3_transpose_16_0001500 ../dist/bin/hw3_transpose_16_0002000 ../dist/bin/hw3_transpose_16_0004000 ../dist/tmp/ext/cotranspose.o ../dist/tmp/hw3/transpose_01_0000020.o ../dist/tmp/hw3/transpose_01_0000100.o ../dist/tmp/hw3/transpose_01_0000500.o ../dist/tmp/hw3/transpose_01_0000800.o ../dist/tmp/hw3/transpose_01_0001000.o ../dist/tmp/hw3/transpose_01_0001500.o ../dist/tmp/hw3/transpose_01_0002000.o ../dist/tmp/hw3/transpose_01_0004000.o ../dist/tmp/hw3/transpose_16_0000020.o ../dist/tmp/hw3/transpose_16_0000100.o ../dist/tmp/hw3/transpose_16_0000500.o ../dist/tmp/hw3/transpose_16_0000800.o ../dist/tmp/hw3/transpose_16_0001000.o ../dist/tmp/hw3/transpose_16_0001500.o ../dist/tmp/hw3/transpose_16_0002000.o ../dist/tmp/hw3/transpose_16_0004000.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o analysis.json data.json data_co.json fig-time.svg index.html

../dist/bin/hw3_cotranspose: ../dist/tmp/ext/cotranspose.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/ext/cotranspose.o

../dist/bin/hw3_transpose_01_0000020: ../dist/tmp/hw3/transpose_01_0000020.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_01_0000020.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_01_0000100: ../dist/tmp/hw3/transpose_01_0000100.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_01_0000100.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_01_0000500: ../dist/tmp/hw3/transpose_01_0000500.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_01_0000500.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_01_0000800: ../dist/tmp/hw3/transpose_01_0000800.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_01_0000800.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_01_0001000: ../dist/tmp/hw3/transpose_01_0001000.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_01_0001000.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_01_0001500: ../dist/tmp/hw3/transpose_01_0001500.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_01_0001500.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_01_0002000: ../dist/tmp/hw3/transpose_01_0002000.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_01_0002000.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_01_0004000: ../dist/tmp/hw3/transpose_01_0004000.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_01_0004000.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_16_0000020: ../dist/tmp/hw3/transpose_16_0000020.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_16_0000020.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_16_0000100: ../dist/tmp/hw3/transpose_16_0000100.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_16_0000100.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_16_0000500: ../dist/tmp/hw3/transpose_16_0000500.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_16_0000500.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_16_0000800: ../dist/tmp/hw3/transpose_16_0000800.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_16_0000800.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_16_0001000: ../dist/tmp/hw3/transpose_16_0001000.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_16_0001000.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_16_0001500: ../dist/tmp/hw3/transpose_16_0001500.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_16_0001500.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_16_0002000: ../dist/tmp/hw3/transpose_16_0002000.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_16_0002000.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/bin/hw3_transpose_16_0004000: ../dist/tmp/hw3/transpose_16_0004000.o ../dist/tmp/utils/time.o ../dist/tmp/utils/utils.o
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CFLAGS) -o '$@' ../dist/tmp/hw3/transpose_16_0004000.o ../dist/tmp/utils/utils.o ../dist/tmp/utils/time.o -lm

../dist/tmp/ext/cotranspose.o: ../ext/cotranspose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -O0 -c -o '$@' ../ext/cotranspose.c

../dist/tmp/hw3/transpose_01_0000020.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=1 -DSIZE=20 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_01_0000100.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=1 -DSIZE=100 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_01_0000500.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=1 -DSIZE=500 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_01_0000800.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=1 -DSIZE=800 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_01_0001000.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=1 -DSIZE=1000 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_01_0001500.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=1 -DSIZE=1500 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_01_0002000.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=1 -DSIZE=2000 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_01_0004000.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=1 -DSIZE=4000 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_16_0000020.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=16 -DSIZE=20 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_16_0000100.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=16 -DSIZE=100 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_16_0000500.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=16 -DSIZE=500 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_16_0000800.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=16 -DSIZE=800 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_16_0001000.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=16 -DSIZE=1000 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_16_0001500.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=16 -DSIZE=1500 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_16_0002000.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=16 -DSIZE=2000 -O0 -c -o '$@' transpose.c

../dist/tmp/hw3/transpose_16_0004000.o: ../utils/utils.h transpose.c
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) -DBSIZE=16 -DSIZE=4000 -O0 -c -o '$@' transpose.c

../dist/tmp/utils/time.o: ../utils/time.c ../utils/time.h
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) $(CFLAGS) -c -o '$@' ../utils/time.c

../dist/tmp/utils/utils.o: ../utils/time.h ../utils/utils.c ../utils/utils.h
	@d=`dirname '$@'` && mkdir -p "$$d"
	$(CC) $(CPPFLAGS) $(CFLAGS) -c -o '$@' ../utils/utils.c

analysis.json: data.json data_co.json
	./main.py analyze '$@' data.json data_co.json

data.json: ../dist/bin/hw3_transpose_01_0000020 ../dist/bin/hw3_transpose_01_0000100 ../dist/bin/hw3_transpose_01_0000500 ../dist/bin/hw3_transpose_01_0000800 ../dist/bin/hw3_transpose_01_0001000 ../dist/bin/hw3_transpose_01_0001500 ../dist/bin/hw3_transpose_01_0002000 ../dist/bin/hw3_transpose_01_0004000 ../dist/bin/hw3_transpose_16_0000020 ../dist/bin/hw3_transpose_16_0000100 ../dist/bin/hw3_transpose_16_0000500 ../dist/bin/hw3_transpose_16_0000800 ../dist/bin/hw3_transpose_16_0001000 ../dist/bin/hw3_transpose_16_0001500 ../dist/bin/hw3_transpose_16_0002000 ../dist/bin/hw3_transpose_16_0004000
	./main.py bench '$@' ../dist/bin/hw3_transpose_01_0000020 ../dist/bin/hw3_transpose_01_0000100 ../dist/bin/hw3_transpose_01_0000500 ../dist/bin/hw3_transpose_01_0000800 ../dist/bin/hw3_transpose_01_0001000 ../dist/bin/hw3_transpose_01_0001500 ../dist/bin/hw3_transpose_01_0002000 ../dist/bin/hw3_transpose_01_0004000 ../dist/bin/hw3_transpose_16_0000020 ../dist/bin/hw3_transpose_16_0000100 ../dist/bin/hw3_transpose_16_0000500 ../dist/bin/hw3_transpose_16_0000800 ../dist/bin/hw3_transpose_16_0001000 ../dist/bin/hw3_transpose_16_0001500 ../dist/bin/hw3_transpose_16_0002000 ../dist/bin/hw3_transpose_16_0004000

data_co.json: ../dist/bin/hw3_cotranspose data.json
	./main.py bench_co '$@' data.json ../dist/bin/hw3_cotranspose

fig-time.svg: analysis.json
	./main.py plot '$@' analysis.json

index.html: analysis.json fig-time.svg template.html
	./main.py tabulate '$@' analysis.json fig-time.svg template.html

.PHONY: all clean
